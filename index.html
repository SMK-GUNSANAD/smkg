<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard SMKG</title>
  <style>
    :root{
      --navH: 64px;
      --ease: cubic-bezier(.2,.8,.2,1);
      --ease2: cubic-bezier(.16,1,.3,1);
      --dur: 560ms;

      /* THEME (default = dark) */
      --bg0: #07080b;
      --glass: rgba(12,14,18,.55);
      --border: rgba(255,255,255,.14);

      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.74);
      --shadow: 0 18px 55px rgba(0,0,0,.45);
      --r: 18px;

      /* used by nav + some overlays */
      --navBg: rgba(10,12,16,.55);
      --navBorder: rgba(255,255,255,.12);
      --btnBg: rgba(255,255,255,.06);
      --btnBgHover: rgba(255,255,255,.10);
      --btnBorder: rgba(255,255,255,.14);
      --btnShadowHover: 0 16px 36px rgba(0,0,0,.22);

      /* background ingredients (so we can swap them in light mode) */
      --bg-r1: rgba(255,255,255,.10);
      --bg-r2: rgba(255,255,255,.08);
      --bg-r3: rgba(255,255,255,.07);
      --bg-l1: #05060a;
      --bg-l2: #07080b;

      --gridLine: rgba(255,255,255,.06);
      --gridOpacity: .08;
    }

    /* Light theme overrides */
    html[data-theme="light"]{
      --bg0: #f6f7fb;
      --glass: rgba(255,255,255,.62);
      --border: rgba(10,12,16,.14);

      --text: rgba(10,12,16,.92);
      --muted: rgba(10,12,16,.70);
      --shadow: 0 18px 55px rgba(10,12,16,.10);

      --navBg: rgba(255,255,255,.72);
      --navBorder: rgba(10,12,16,.10);
      --btnBg: rgba(10,12,16,.06);
      --btnBgHover: rgba(10,12,16,.10);
      --btnBorder: rgba(10,12,16,.12);
      --btnShadowHover: 0 16px 36px rgba(10,12,16,.10);

      --bg-r1: rgba(10,12,16,.10);
      --bg-r2: rgba(10,12,16,.08);
      --bg-r3: rgba(10,12,16,.06);
      --bg-l1: #ffffff;
      --bg-l2: #f6f7fb;

      --gridLine: rgba(10,12,16,.08);
      --gridOpacity: .10;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; margin:0; font-family: system-ui,-apple-system,Segoe UI,Roboto,Arial; background: var(--bg0); overflow:hidden; }
    a{ color: inherit; text-decoration: none; }
    button{ font: inherit; }
    @media (prefers-reduced-motion: reduce){
      *{ animation:none !important; transition:none !important; }
    }

    /* Background */
    .bg{
      position: fixed; inset:0; z-index:0;
      background:
        radial-gradient(900px 600px at 18% 18%, var(--bg-r1), transparent 55%),
        radial-gradient(900px 700px at 82% 28%, var(--bg-r2), transparent 55%),
        radial-gradient(900px 700px at 60% 92%, var(--bg-r3), transparent 60%),
        linear-gradient(180deg, var(--bg-l1), var(--bg-l2) 60%, var(--bg-l1));
    }
    .grid{
      position:absolute; inset:0;
      background-image:
        linear-gradient(to right, var(--gridLine) 1px, transparent 1px),
        linear-gradient(to bottom, var(--gridLine) 1px, transparent 1px);
      background-size: 68px 68px;
      opacity: var(--gridOpacity);
      mask-image: radial-gradient(600px 360px at 30% 30%, black 25%, transparent 70%);
      pointer-events:none;
    }

    /* Top nav */
    .topbar{
      position: fixed; inset: 0 0 auto 0;
      height: var(--navH);
      z-index: 50;
      display:flex; align-items:center; justify-content:space-between;
      padding: 0 14px;
      backdrop-filter: blur(16px);
      background: var(--navBg);
      border-bottom: 1px solid var(--navBorder);
      transform: translateY(-10px);
      opacity: 0;
      animation: navIn 760ms var(--ease2) forwards;
    }
    @keyframes navIn{ to{ transform: translateY(0); opacity: 1; } }

    .brand{
      display:flex; align-items:center; gap:10px;
      color: var(--text); font-weight: 820; letter-spacing:.2px;
      user-select:none;
    }
    .mark{
      width: 34px; height: 34px; border-radius: 14px;
      border: 1px solid var(--btnBorder);
      background: radial-gradient(circle at 30% 25%, rgba(255,255,255,.20), rgba(255,255,255,.05) 60%, rgba(255,255,255,.02));
      box-shadow: 0 12px 25px rgba(0,0,0,.22);
      display:flex; align-items:center; justify-content:center;
      font-size: 14px;
      color: var(--text);
    }
    html[data-theme="light"] .mark{
      background: radial-gradient(circle at 30% 25%, rgba(10,12,16,.10), rgba(10,12,16,.04) 60%, rgba(10,12,16,.02));
      box-shadow: 0 12px 25px rgba(10,12,16,.10);
    }

    .sub{
      font-size: 12px;
      color: color-mix(in srgb, var(--text) 68%, transparent);
      font-weight: 650;
      margin-top: 1px;
    }

    .navlinks{ display:flex; align-items:center; gap:10px; }
    .navlinks a{
      padding: 9px 11px;
      border-radius: 14px;
      border: 1px solid var(--btnBorder);
      background: var(--btnBg);
      color: var(--text);
      font-size: 14px;
      transition: transform 220ms var(--ease), background 220ms var(--ease), box-shadow 220ms var(--ease);
      will-change: transform;
    }
    .navlinks a:hover{
      transform: translateY(-2px);
      background: var(--btnBgHover);
      box-shadow: var(--btnShadowHover);
    }

    /* Theme toggle button (matches navlinks style) */
    .themeBtn{
      padding: 9px 11px;
      border-radius: 14px;
      border: 1px solid var(--btnBorder);
      background: var(--btnBg);
      color: var(--text);
      font-size: 14px;
      cursor:pointer;
      transition: transform 220ms var(--ease), background 220ms var(--ease), box-shadow 220ms var(--ease);
      will-change: transform;
      display:inline-flex; align-items:center; gap:8px;
    }
    .themeBtn:hover{
      transform: translateY(-2px);
      background: var(--btnBgHover);
      box-shadow: var(--btnShadowHover);
    }

    /* Slides */
    .viewport{
      position: relative;
      z-index: 5;
      height: 100%;
      padding-top: var(--navH);
      overflow:hidden;
    }
    .track{
      height: calc(100% - var(--navH));
      display:flex;
      transition: transform var(--dur) var(--ease2);
      will-change: transform;
    }
    .slide{
      width: 100vw;
      height: calc(100vh - var(--navH));
      flex: 0 0 100%;
      position: relative;
      overflow:hidden;
    }

    .img{
      position:absolute; inset:0;
      background-size: cover;
      background-position: center;
      transform: scale(1.02);
      transition: transform 1000ms var(--ease2), filter 1000ms var(--ease2);
      filter: saturate(1.02) contrast(1.02);
      will-change: transform;
    }
    .slide.active .img{ animation: zoom 18s linear forwards; }
    @keyframes zoom{ from{ transform: scale(1.02); } to{ transform: scale(1.07); } }

    .overlay{
      position:absolute; inset:0;
      background:
        linear-gradient(to top, rgba(0,0,0,.80), rgba(0,0,0,.26) 60%, rgba(0,0,0,.12)),
        radial-gradient(900px 520px at 28% 22%, rgba(255,255,255,.10), transparent 60%);
    }
    html[data-theme="light"] .overlay{
      background:
        linear-gradient(to top, rgba(255,255,255,.72), rgba(255,255,255,.18) 60%, rgba(255,255,255,.10)),
        radial-gradient(900px 520px at 28% 22%, rgba(10,12,16,.08), transparent 60%);
    }

    .content{
      position:absolute;
      left: 16px; right: 16px;
      bottom: 16px;
      max-width: 1020px;
      z-index: 2;
      color: var(--text);
    }
    .card{
      display:inline-block;
      width: min(1020px, 100%);
      padding: 18px 18px 16px;
      border-radius: 22px;
      border: 1px solid var(--btnBorder);
      background: rgba(12,14,18,.42);
      backdrop-filter: blur(16px);
      box-shadow: var(--shadow);
      transform: translateY(18px);
      opacity: 0;
      transition: transform 620ms var(--ease2), opacity 620ms var(--ease2);
      transition-delay: 90ms;
    }
    html[data-theme="light"] .card{
      background: rgba(255,255,255,.62);
    }
    .slide.active .card{ transform: translateY(0); opacity: 1; }

    .kicker{
      font-size: 12px;
      letter-spacing: .18em;
      text-transform: uppercase;
      color: color-mix(in srgb, var(--text) 78%, transparent);
    }
    .title{
      margin: 7px 0 10px;
      font-size: clamp(26px, 3.4vw, 52px);
      line-height: 1.05;
      letter-spacing: -0.02em;
      color: var(--text);
    }
    .note{
      margin:0;
      font-size: clamp(14px, 1.5vw, 18px);
      line-height: 1.55;
      color: var(--muted);
      max-width: 78ch;
    }
    .extra{
      margin-top: 10px;
      font-size: 14px;
      color: color-mix(in srgb, var(--text) 80%, transparent);
      line-height: 1.55;
      max-width: 80ch;
    }
    .bullets{
      margin: 10px 0 0;
      padding-left: 18px;
      color: color-mix(in srgb, var(--text) 80%, transparent);
      line-height: 1.55;
    }
    .bullets li{ margin: 4px 0; }

    .hl{ position: relative; display:inline-block; color: var(--text); }
    .hl::after{
      content:"";
      position:absolute;
      left:0; bottom:-7px;
      height: 2px;
      width: 0%;
      background: color-mix(in srgb, var(--text) 92%, transparent);
      border-radius: 999px;
      opacity: .95;
    }
    .slide.active .hl::after{
      animation: underline 650ms var(--ease2) forwards;
      animation-delay: 380ms;
    }
    @keyframes underline{ to{ width: 100%; } }

    /* Pills */
    .pills{
      position: fixed;
      left: 14px; bottom: 16px;
      z-index: 60;
      display:flex; gap:10px; align-items:center;
    }
    .pill{
      position: relative;
      width: 10px; height: 10px;
      border-radius: 999px;
      border: 1px solid color-mix(in srgb, var(--text) 30%, transparent);
      background: color-mix(in srgb, var(--text) 16%, transparent);
      opacity: .85;
      cursor:pointer;
      transition: width 260ms var(--ease2), background 260ms var(--ease2), opacity 260ms var(--ease2);
      overflow:hidden;
      backdrop-filter: blur(12px);
    }
    .pill.active{
      width: 54px;
      opacity: 1;
      background: color-mix(in srgb, var(--text) 22%, transparent);
    }
    .pill .bar{
      position:absolute; inset:0;
      width: 0%;
      background: color-mix(in srgb, var(--text) 58%, transparent);
      border-radius: 999px;
    }
    .pill.active.running .bar{ animation: fill linear forwards; }
    @keyframes fill{ to{ width: 100%; } }

    /* Arrows */
    .controls{
      position: fixed;
      right: 14px; bottom: 14px;
      z-index: 60;
      display:flex; gap:10px;
    }
    .btn{
      width: 48px; height: 48px;
      border-radius: 18px;
      border: 1px solid var(--btnBorder);
      background: var(--btnBg);
      color: var(--text);
      cursor:pointer;
      font-size: 20px;
      backdrop-filter: blur(14px);
      transition: transform 220ms var(--ease), background 220ms var(--ease), box-shadow 220ms var(--ease);
    }
    .btn:hover{
      transform: translateY(-2px);
      background: var(--btnBgHover);
      box-shadow: var(--btnShadowHover);
    }

    /* ===== Page transition overlay (push from top) ===== */
    .pageTrans{
      position: fixed;
      inset: 0;
      z-index: 999;
      pointer-events:none;
      transform: translateY(-110%);
      background: radial-gradient(1200px 700px at 30% 20%, rgba(255,255,255,.12), transparent 60%),
                  linear-gradient(180deg, rgba(10,12,16,.95), rgba(10,12,16,.92));
      border-bottom: 1px solid rgba(255,255,255,.10);
      backdrop-filter: blur(18px);
    }
    html[data-theme="light"] .pageTrans{
      background: radial-gradient(1200px 700px at 30% 20%, rgba(10,12,16,.10), transparent 60%),
                  linear-gradient(180deg, rgba(255,255,255,.94), rgba(255,255,255,.90));
      border-bottom: 1px solid rgba(10,12,16,.10);
    }
    .pageTrans.run{
      pointer-events:auto;
      animation: pushDown 520ms var(--ease2) forwards;
    }
    @keyframes pushDown{
      to{ transform: translateY(0%); }
    }

    /* Mobile */
    @media (max-width: 820px){
      .navlinks{ display:none; }
    }
  </style>
</head>

<body>
  <div class="bg"><div class="grid"></div></div>
  <div class="pageTrans" id="pageTrans" aria-hidden="true"></div>

  <header class="topbar">
    <div class="brand">
      <div class="mark">◆</div>
      <div>
        <div>Dashboard SMKG</div>
        <div class="sub">Showcase • Dashboard</div>
      </div>
    </div>

    <!-- NOTE: links use page transition -->
    <nav class="navlinks" aria-label="Top navigation">
      <a href="akademik.html" data-trans="true">Pengurusan</a>
      <a href="pages/schools.html" data-trans="true">HEM</a>
      <a href="pages/about.html" data-trans="true">Ko-Kurikulum</a>
      <a href="pages/about.html" data-trans="true">Live</a>

      <!-- NEW: Light/Dark toggle -->
      <button class="themeBtn" id="themeToggle" type="button" aria-label="Toggle light or dark theme">
        <span id="themeIcon" aria-hidden="true">☾</span>
        <span id="themeLabel">Dark</span>
      </button>
    </nav>
  </header>

  <main class="viewport">
    <section class="track" id="track" aria-label="Full-screen slides"></section>
  </main>

  <div class="pills" id="pills" aria-label="Slide navigation"></div>

  <div class="controls" aria-label="Slide controls">
    <button class="btn" id="prev" aria-label="Previous slide">‹</button>
    <button class="btn" id="next" aria-label="Next slide">›</button>
  </div>

  <script>
    /***********************
     * THEME TOGGLE (NEW)
     ***********************/
    (function initTheme(){
      const root = document.documentElement;
      const btn = document.getElementById("themeToggle");
      const ico = document.getElementById("themeIcon");
      const lbl = document.getElementById("themeLabel");

      function setTheme(t){
        root.setAttribute("data-theme", t);
        try{ localStorage.setItem("smkg_theme", t); }catch(_){}
        if (t === "light"){
          ico.textContent = "☀";
          lbl.textContent = "Light";
        } else {
          ico.textContent = "☾";
          lbl.textContent = "Dark";
        }
      }

      // Load saved theme, else follow system preference
      let saved = null;
      try{ saved = localStorage.getItem("smkg_theme"); }catch(_){}
      if (saved === "light" || saved === "dark"){
        setTheme(saved);
      } else {
        const prefersLight = window.matchMedia && window.matchMedia("(prefers-color-scheme: light)").matches;
        setTheme(prefersLight ? "light" : "dark");
      }

      if (btn){
        btn.addEventListener("click", () => {
          const cur = root.getAttribute("data-theme") === "light" ? "light" : "dark";
          setTheme(cur === "light" ? "dark" : "light");
        });
      }
    })();

    /***********************
     * SLIDES (EDIT HERE)
     * Add/remove objects to change 3 → 4 → 5 slides.
     * - extra: extra paragraph text
     * - bullets: bullet list
     ***********************/
    const SLIDES = [
      {
        kicker: "SHOWCASE",
        title: `School <span class="hl">Performance</span> Overview`,
        note: "Executive-friendly opener. One slide, one message, one image.",
        extra: "Optional extra text: You can add a short narrative here to explain the story behind the numbers.",
        bullets: [
          "2025 focus: Improve core subjects consistency",
          "Panel interventions tracked weekly",
          "Targets aligned with district KPI"
        ],
        bg: "https://images.unsplash.com/photo-1523050854058-8df90110c9f1?auto=format&fit=crop&w=2200&q=60"
      },
      {
        kicker: "DASHBOARD",
        title: `Trends & <span class="hl">Highlights</span>`,
        note: "This slide becomes your KPI proof (charts later).",
        extra: "Optional extra text: Keep it readable. 2 charts max per slide for admin viewing.",
        bullets: [
          "GPMP trend + subject heatmap (recommended)",
          "Identify at-risk groups early",
          "Compare TOV vs current vs target"
        ],
        bg: "https://images.unsplash.com/photo-1556761175-5973dc0f32e7?auto=format&fit=crop&w=2200&q=60"
      },
      {
        kicker: "ACTION",
        title: `Intervention <span class="hl">Next</span> Steps`,
        note: "Clear plan. Clear ownership. Clear timeline.",
        extra: "Optional extra text: This is where you show admin the playbook, not the raw data.",
        bullets: [
          "Week 1: Diagnose + set target groups",
          "Week 2–3: Execute micro-interventions",
          "Week 4: Review impact + refine"
        ],
        bg: "https://images.unsplash.com/photo-1523240795612-9a054b0db644?auto=format&fit=crop&w=2200&q=60"
      }
    ];

    const track = document.getElementById("track");
    const pills = document.getElementById("pills");
    const prevBtn = document.getElementById("prev");
    const nextBtn = document.getElementById("next");
    const pageTrans = document.getElementById("pageTrans");

    let idx = 0;

    // AUTO SLIDE: 10 seconds
    const AUTO_MS = 10000;
    let autoTimer = null;

    function render(){
      track.innerHTML = "";
      pills.innerHTML = "";

      SLIDES.forEach((s, i) => {
        const slide = document.createElement("section");
        slide.className = "slide" + (i === idx ? " active" : "");

        const img = document.createElement("div");
        img.className = "img";
        img.style.backgroundImage = `url('${s.bg}')`;

        const overlay = document.createElement("div");
        overlay.className = "overlay";

        const content = document.createElement("div");
        content.className = "content";

        const extraHTML = s.extra ? `<div class="extra">${s.extra}</div>` : "";
        const bulletsHTML = (s.bullets && s.bullets.length)
          ? `<ul class="bullets">${s.bullets.map(b => `<li>${b}</li>`).join("")}</ul>`
          : "";

        content.innerHTML = `
          <div class="card">
            <div class="kicker">${s.kicker}</div>
            <div class="title">${s.title}</div>
            <p class="note">${s.note}</p>
            ${extraHTML}
            ${bulletsHTML}
          </div>
        `;

        slide.appendChild(img);
        slide.appendChild(overlay);
        slide.appendChild(content);
        track.appendChild(slide);

        const p = document.createElement("button");
        p.className = "pill" + (i === idx ? " active" : "");
        p.setAttribute("aria-label", `Go to slide ${i+1}`);
        p.innerHTML = `<span class="bar"></span>`;
        p.addEventListener("click", () => { go(i); restartAuto(); });
        pills.appendChild(p);
      });

      apply(true);
      restartAuto();
    }

    function apply(restartAnimations){
      track.style.transform = `translateX(${-idx * 100}vw)`;

      const slides = [...track.children];
      const ps = [...pills.children];

      slides.forEach((s, i) => {
        s.classList.toggle("active", i === idx);
        if (restartAnimations && i === idx){
          const img = s.querySelector(".img");
          if (img){
            img.style.animation = "none";
            void img.offsetHeight;
            img.style.animation = "";
          }
        }
      });

      ps.forEach((p, i) => {
        p.classList.toggle("active", i === idx);
        p.classList.remove("running");
        const bar = p.querySelector(".bar");
        if (bar){
          bar.style.animation = "none";
          bar.style.width = "0%";
          void bar.offsetHeight;
          bar.style.animation = "";
        }
      });

      startProgressBar();
    }

    function go(i){
      idx = (i + SLIDES.length) % SLIDES.length;
      apply(true);
    }

    prevBtn.addEventListener("click", () => { go(idx - 1); restartAuto(); });
    nextBtn.addEventListener("click", () => { go(idx + 1); restartAuto(); });

    window.addEventListener("keydown", (e) => {
      if (e.key === "ArrowLeft") { go(idx - 1); restartAuto(); }
      if (e.key === "ArrowRight") { go(idx + 1); restartAuto(); }
    });

    // Swipe
    let startX = null;
    window.addEventListener("touchstart", e => startX = e.touches[0].clientX, {passive:true});
    window.addEventListener("touchend", e => {
      if (startX == null) return;
      const endX = e.changedTouches[0].clientX;
      const dx = endX - startX;
      if (Math.abs(dx) > 45) { go(dx > 0 ? idx - 1 : idx + 1); restartAuto(); }
      startX = null;
    }, {passive:true});

    function clearAuto(){
      if (autoTimer) clearInterval(autoTimer);
      autoTimer = null;
    }

    function startProgressBar(){
      const active = pills.children[idx];
      if (!active) return;
      const bar = active.querySelector(".bar");
      if (!bar) return;
      active.classList.add("running");
      bar.style.animationDuration = AUTO_MS + "ms";
      bar.style.animationName = "fill";
      bar.style.animationTimingFunction = "linear";
      bar.style.animationFillMode = "forwards";
    }

    function restartAuto(){
      clearAuto();
      // reset progress
      [...pills.children].forEach(p => {
        p.classList.remove("running");
        const bar = p.querySelector(".bar");
        if (bar){ bar.style.animation = "none"; bar.style.width = "0%"; }
      });
      startProgressBar();
      autoTimer = setInterval(() => go(idx + 1), AUTO_MS);
    }

    /***********************
     * PowerPoint-ish Page Transition for nav links
     ***********************/
    function navigateWithTransition(url){
      pageTrans.classList.add("run");
      // wait for animation to cover screen, then navigate
      setTimeout(() => { window.location.href = url; }, 520);
    }

    document.querySelectorAll('a[data-trans="true"]').forEach(a => {
      a.addEventListener("click", (e) => {
        e.preventDefault();
        const url = a.getAttribute("href");
        navigateWithTransition(url);
      });
    });

    render();
  </script>
</body>
</html>


